FROM node:16.14.0-alpine

RUN mkdir -p /usr/src/app

WORKDIR /usr/src/app

COPY package.json ./
COPY yarn.lock ./

RUN yarn install

COPY . . 

EXPOSE 8000 

RUN yarn build

# CMD [ "yarn", "start:prod" ]

RUN ["chmod", "+x", "/usr/src/app/docker-entrypoint.sh"]

ENTRYPOINT ["sh", "/usr/src/app/docker-entrypoint.sh"]