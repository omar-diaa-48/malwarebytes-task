import { TextField } from "@mui/material";
import { Controller, useForm, useFormContext } from 'react-hook-form';

interface AuthFormProps {
	submitAction: (...args: any[]) => void;
}

const AuthForm: React.FC<AuthFormProps> = (props) => {
	const { submitAction } = props;

	const { control, formState, handleSubmit } = useFormContext();

	const { isValid } = formState;

	return (
		<form onSubmit={handleSubmit(submitAction)}>
			<div className="mb-6">
				<Controller
					name="username"
					control={control}
					render={({ field }) => (
						<TextField
							{...field}
							placeholder="username"
							className="w-full mb-4"
						/>
					)}
				/>
			</div>
			<div className="mb-6">
				<Controller
					name="password"
					control={control}
					render={({ field }) => (
						<TextField
							{...field}
							placeholder="password"
							className="w-full mb-4"
						/>
					)}
				/>
			</div>
			<div className="text-center lg:text-left">
				<button
					type="submit"
					className="inline-block px-7 py-3 bg-blue-600 text-white font-medium text-sm leading-snug uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 disabled:bg-blue-200 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"
					disabled={!isValid}
				>
					Login
				</button>
			</div>
		</form>
	)
}

export default AuthForm