import { useNavigate } from 'react-router-dom';
import { yupResolver } from "@hookform/resolvers/yup";
import { FormProvider, useForm } from 'react-hook-form';
import { authDefaultValues, authSchema } from "../interfaces/schemes/auth";
import { IAuthDto } from "../interfaces/dtos/auth";
import api from "../utils/api";
import AuthForm from "../components/layout/AuthForm";

const Register = () => {
	const navigate = useNavigate();

	const methods = useForm<IAuthDto>({
		mode: "onChange",
		defaultValues: authDefaultValues,
		resolver: yupResolver(authSchema)
	});

	const registerCallback = (values: IAuthDto) => {
		api.post('/auth/register', values)
	};

	return (
		<FormProvider {...methods}>
			<AuthForm submitAction={registerCallback} />
		</FormProvider>
	)
}

export default Register;