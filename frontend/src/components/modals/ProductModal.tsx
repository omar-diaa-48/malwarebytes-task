import React from 'react'
import { ProductItem } from '../../interfaces/responses/product'
import { useAppDispatch } from '../../store/hooks';
import { closeModalAction } from '../../store/slices/app';
import CloseIcon from '@mui/icons-material/Close';
import { Input } from '@mui/material';
import CustomButton from '../shared/CustomButton';
import { addItemToCart, removeItemFromCart } from '../../store/slices/cart';

interface ProductModalProps {
	item: ProductItem;
}

const ProductModal: React.FC<ProductModalProps> = ({ item }) => {
	const dispatch = useAppDispatch();

	const handleAddToCart = () => {
		dispatch(addItemToCart({ item }))
	}

	const handleRemoveFromCart = () => {
		dispatch(removeItemFromCart({ item }))
	}

	return (
		<div className="bg-white rounded-lg shadow dark:bg-gray-700">
			<div className="flex items-center gap-x-2 p-4 border-b rounded-t dark:border-gray-600">
				<h3 className="text-xl font-semibold text-gray-900 dark:text-white">{item.title}</h3>
				<p>${item.price}</p>
				<Input type='number' readOnly value={item.availableCount} className='w-8' />
				<div className='flex-1' />
				<CloseIcon className='cursor-pointer' onClick={() => dispatch(closeModalAction())} />
			</div>
			<div className="flex flex-col md:flex-row p-6 space-y-6 space-x-3">
				<div className='flex flex-col'>
					<p className="text-base leading-relaxed text-gray-500 dark:text-gray-400">{item.productCategory?.title}</p>
					<p className="text-base leading-relaxed text-gray-500 dark:text-gray-400">{item.description}</p>
				</div>

				<div className="flex flex-col gap-y-4">
					<CustomButton onClick={handleAddToCart} className='rounded-sm px-2 bg-green-500' type="button" disabled={item.availableCount < 1} >Add to cart</CustomButton>
					<CustomButton onClick={handleRemoveFromCart} className='rounded-sm px-2 bg-yellow-500' type="button">Remove from cart</CustomButton>
				</div>
			</div>
		</div>
	)
}

export default ProductModal