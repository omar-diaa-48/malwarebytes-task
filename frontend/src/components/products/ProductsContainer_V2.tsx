import React, { useEffect } from 'react'
import GroupedProductsComponent from './GroupedProducts'
import { useAppDispatch, useAppSelector } from '../../store/hooks'
import { getAllProductsAsyncAction } from '../../store/slices/products'
import { RootState } from '../../store'

const ProductsContainerComponent = () => {
	const dispatch = useAppDispatch();
	const { items: products } = useAppSelector((state: RootState) => state.products)

	useEffect(() => {
		dispatch(getAllProductsAsyncAction())
	}, [])

	return (
		<div test-id="test-products-container" className="container flex flex-col items-center justify-center w-full xl:w-1/2 mx-auto bg-white rounded-lg shadow">
			<div className="w-full px-4 py-5 border-b sm:px-6 mb-4">
				<h3 className="text-lg font-medium leading-6 text-gray-900">
					Available products
				</h3>
				<p className="max-w-2xl mt-1 text-sm text-gray-500">
					Details and informations about produts and their categories.
				</p>
			</div>
			<ul className="w-full flex flex-col px-4 sm:px-6">
				{
					products && (
						<GroupedProductsComponent data={products} />
					)
				}
			</ul>
		</div>
	)
}

export default ProductsContainerComponent