import React from "react";
import { useNavigate } from 'react-router-dom';
import { yupResolver } from "@hookform/resolvers/yup";
import { TextField } from "@mui/material";
import { Controller, useForm } from 'react-hook-form';
import { loginSchema } from "../interfaces/schemes/login";
import { ILoginDto } from "../interfaces/dtos/login";

const Login = () => {
	const navigate = useNavigate();

	const { control, formState, handleSubmit } = useForm<ILoginDto>({
		mode: "onChange",
		defaultValues: {
			username: "",
			password: ""
		},
		resolver: yupResolver(loginSchema)
	});

	const { isValid } = formState;

	const loginCallback = (values: ILoginDto) => {
		console.log({ values });
	};

	return (
		<section className="h-screen">
			<div className="px-6 h-full text-gray-800">
				<div className="flex xl:justify-center lg:justify-between justify-center items-center flex-wrap h-full g-6">
					<div className="xl:ml-20 xl:w-5/12 lg:w-5/12 md:w-8/12 mb-12 md:mb-0">
						<form onSubmit={handleSubmit(loginCallback)}>
							<div className="mb-6">
								<Controller
									name="username"
									control={control}
									render={({ field }) => (
										<TextField
											{...field}
											placeholder="username"
											className="w-full mb-4"
										/>
									)}
								/>
							</div>
							<div className="mb-6">
								<Controller
									name="password"
									control={control}
									render={({ field }) => (
										<TextField
											{...field}
											placeholder="password"
											className="w-full mb-4"
										/>
									)}
								/>
							</div>
							<div className="text-center lg:text-left">
								<button
									type="submit"
									className="inline-block px-7 py-3 bg-blue-600 text-white font-medium text-sm leading-snug uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 disabled:bg-blue-200 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"
									disabled={!isValid}
								>
									Login
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</section>
	)
}

export default Login;