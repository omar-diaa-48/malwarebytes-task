import { TextField } from "@mui/material";
import { Controller, useForm, useFormContext } from 'react-hook-form';
import CustomButton from "../shared/CustomButton";

interface AuthFormProps {
	submitAction: (...args: any[]) => void;
}

const AuthForm: React.FC<AuthFormProps> = (props) => {
	const { submitAction } = props;

	const { control, formState, handleSubmit } = useFormContext();

	const { isValid } = formState;

	return (
		<form onSubmit={handleSubmit(submitAction)}>
			<div className="mb-6">
				<Controller
					name="username"
					control={control}
					render={({ field }) => (
						<TextField
							{...field}
							placeholder="username"
							className="w-full mb-4"
						/>
					)}
				/>
			</div>
			<div className="mb-6">
				<Controller
					name="password"
					control={control}
					render={({ field }) => (
						<TextField
							{...field}
							placeholder="password"
							className="w-full mb-4"
						/>
					)}
				/>
			</div>
			<div className="text-center lg:text-left">
				<CustomButton type="submit" disabled={!isValid} >Login</CustomButton>
			</div>
		</form>
	)
}

export default AuthForm