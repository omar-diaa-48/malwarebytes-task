import { Controller, Delete, Get, Param, Post, UseGuards } from '@nestjs/common';
import { ApiTags } from '@nestjs/swagger';
import { ProductItem } from 'src/models/product-item';
import { ProductsService } from './products.service';
import { AuthGuard } from 'src/guards/auth.guard';

@ApiTags('products')
@UseGuards(AuthGuard)
@Controller('products')
export class ProductsController {
	constructor(
		private productsService: ProductsService,
	) { }

	@Get()
	findAllProducts(): Promise<{ [key: string]: ProductItem[] }> {
		return this.productsService.findAllProducts();
	}

	@Post(":productId")
	incrementProduct(
		@Param("productId") productId: string
	): Promise<{ valid: boolean }> {
		return this.productsService.incrementProduct(productId);
	}

	@Delete(":productId")
	decrementProduct(
		@Param("productId") productId: string
	): Promise<{ valid: boolean }> {
		return this.productsService.decrementProduct(productId);
	}
}
