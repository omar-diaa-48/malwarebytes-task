import React from 'react'
import { ProductItem } from '../../interfaces/responses/product'
import ProductItemComponent from './ProductItem'
import TEST_IDS from '../../utils/test/test-ids'

interface GroupedProductsProps {
	data: {
		[key: string]: ProductItem[]
	}
}

const GroupedProductsComponent: React.FC<GroupedProductsProps> = ({ data }) => {
	return (
		<ul data-testid='test_grouped-products-container' className="flex flex-col">
			{
				data && (
					Object.keys(data).map((groupTitle) => (
						<li data-testid={TEST_IDS.COMPONENTS.GROUPED_PRODUCTS_GROUP} key={groupTitle} className="flex flex-col mb-2 border-gray-400">
							<p className='text-blue-500'>{groupTitle}</p>
							<ul className='flex flex-col gap-4'>
								{data[groupTitle].map((product) => (
									<ProductItemComponent key={product._id} item={product} />
								))}
							</ul>
						</li>
					))
				)
			}
		</ul>
	)
}

export default GroupedProductsComponent