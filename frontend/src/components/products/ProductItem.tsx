import React from 'react'
import { Input, Tooltip } from '@mui/material';
import { ProductItem } from '../../interfaces/responses/product';

import '../../utils/extensions/string.extensions'
import { useAppDispatch } from '../../store/hooks';
import { openModalAction } from '../../store/slices/app';
import CustomTooltip from '../shared/CustomTooltip';

interface ProductItemComponentProps {
	item: ProductItem;
}

const ProductItemComponent: React.FC<ProductItemComponentProps> = ({ item }) => {
	const dispatch = useAppDispatch();

	return (
		<li
			key={item._id}
			className="transition duration-500 shadow ease-in-out transform hover:-translate-y-1 hover:shadow-lg select-none cursor-pointer bg-white rounded-md flex gap-x-2 flex-1 items-center p-4"
			onClick={() => dispatch(openModalAction({ current: "product-modal", args: { productId: item._id, categoryTitle: item.productCategory.title } }))}
		>
			<div className="w-1/4 pl-1 md:mr-16">
				<p className="font-medium">
					{item.title}
				</p>
			</div>

			<CustomTooltip title={item.description}>
				<p className="w-1/2 text-xs text-gray-600">
					{item.description.truncateText(30)}
				</p>
			</CustomTooltip>

			<div className="w-1/4 flex justify-end items-center text-right">
				<span>In store: </span>
				<Input type='number' readOnly value={item.availableCount} className='w-12' />
			</div>
		</li>
	)
}

export default ProductItemComponent